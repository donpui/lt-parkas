<!DOCTYPE html>
<html lang="lt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LT Transporto Priemonių Analizė</title>
<meta name="description" content="Lietuvos transporto priemonių parko duomenų analizė. Naršykite Regitros atvirus duomenis — markės, modeliai, kategorijos, rida, galia. Veikia naršyklėje, be serverio.">
<meta name="keywords" content="transporto priemonės, Lietuva, Regitra, atviri duomenys, automobiliai, automobilių parkas">
<meta name="author" content="LT Park Analyzer">
<meta name="robots" content="index, follow">

<!-- Open Graph -->
<meta property="og:title" content="LT Transporto Priemonių Analizė">
<meta property="og:description" content="Lietuvos transporto priemonių parko duomenų analizė. Naršykite Regitros atvirus duomenis — markės, modeliai, kategorijos, rida, galia.">
<meta property="og:type" content="website">
<meta property="og:locale" content="lt_LT">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LT Transporto Priemonių Analizė">
<meta name="twitter:description" content="Lietuvos transporto priemonių parko duomenų analizė. Naršykite Regitros atvirus duomenis — markės, modeliai, kategorijos, rida, galia.">

<link rel="stylesheet" href="styles.css">
<script>
  (function() {
    const saved = localStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const theme = saved || (prefersDark ? 'dark' : 'light');
    document.documentElement.setAttribute('data-theme', theme);
  })();
</script>
</head>
<body>

<header class="header">
  <h1>LT Transporto Priemonių Parko Duomenys</h1>
  <button class="theme-toggle" id="theme-toggle" type="button" title="Perjungti tamsų / šviesų režimą" aria-label="Perjungti tamsų / šviesų režimą">
    <span class="theme-icon" aria-hidden="true"></span>
  </button>
</header>

<div id="loading" class="loading">
  <div class="spinner"></div>
  <div id="loading-text">Kraunama DuckDB...</div>
  <div class="progress-wrap" id="progress-wrap"><div class="progress-bar" id="progress-bar"></div></div>
  <div class="progress-text" id="progress-text"></div>
</div>

<div id="app" class="app" data-view="table">
  <div class="filters">
    <div class="filter-group">
      <label>Markė</label>
      <div class="combo" id="f-marke"><input type="text" placeholder="Visos"><button class="clear-btn">&times;</button><div class="dropdown"></div></div>
    </div>
    <div class="filter-group">
      <label>Komercinis pav.</label>
      <div class="combo" id="f-komercinis"><input type="text" placeholder="Visi (Shift+click = multi)"><button class="clear-btn">&times;</button><div class="dropdown"></div></div>
    </div>
    <div class="filter-group">
      <label>Kategorija <a href="https://rekvizitai.vz.lt/istatymai/transporto-priemoniu-kategorijos-ir-klases/" class="label-hint" target="_blank" rel="noopener" title="Transporto priemonių kategorijos ir klasės">ⓘ</a></label>
      <div class="combo" id="f-kategorija"><input type="text" placeholder="Visos"><button class="clear-btn">&times;</button><div class="dropdown"></div></div>
    </div>
    <div class="filter-group">
      <label>Modelio metai</label>
      <div class="combo" id="f-metai"><input type="text" placeholder="Visi"><button class="clear-btn">&times;</button><div class="dropdown"></div></div>
    </div>
  </div>

  <div class="filter-actions">
    <a class="more-toggle" id="more-toggle">Daugiau filtrų &#9662;</a>
    <a class="clear-filters" id="clear-filters">Išvalyti filtrus</a>
  </div>

  <div class="filters extra-filters" id="extra-filters">
    <div class="filter-group">
      <label>Darbinis tūris (cm³)</label>
      <input type="text" class="num-filter" id="f-turis" placeholder="pvz.: 1968, >=1500, <3000">
    </div>
    <div class="filter-group">
      <label>Galia (kW)</label>
      <input type="text" class="num-filter" id="f-galia" placeholder="pvz.: 110, >=75, <200">
    </div>
    <div class="filter-group">
      <label>Rida</label>
      <input type="text" class="num-filter" id="f-rida" placeholder="pvz.: <=100000, >50000">
    </div>
    <div class="filter-group">
      <label>Maks. greitis</label>
      <input type="text" class="num-filter" id="f-greitis" placeholder="pvz.: 200, >=180">
    </div>
    <div class="filter-group">
      <label>Apskritis</label>
      <div class="combo" id="f-apskritis"><input type="text" placeholder="Visos"><button class="clear-btn">&times;</button><div class="dropdown"></div></div>
    </div>
    <div class="filter-group">
      <label>Savivaldybė</label>
      <div class="combo" id="f-savivaldybe"><input type="text" placeholder="Visos"><button class="clear-btn">&times;</button><div class="dropdown"></div></div>
    </div>
    <div class="filter-group">
      <label>Valdymo tipas</label>
      <div class="combo" id="f-vald-tipas"><input type="text" placeholder="Visi"><button class="clear-btn">&times;</button><div class="dropdown"></div></div>
    </div>
    <div class="filter-group">
      <label>Kilmės šalis</label>
      <div class="combo" id="f-kilmes-salis"><input type="text" placeholder="Visos"><button class="clear-btn">&times;</button><div class="dropdown"></div></div>
    </div>
    <div class="filter-group">
      <label>Spalva</label>
      <div class="combo" id="f-spalva"><input type="text" placeholder="Visos"><button class="clear-btn">&times;</button><div class="dropdown"></div></div>
    </div>
  </div>

  <div class="view-tabs">
    <button class="view-tab active" data-view="table" type="button">Lentelė</button>
    <button class="view-tab" data-view="map" type="button">Apskričių žemėlapis</button>
  </div>

  <div class="view view-map" id="view-map">
    <div class="map-card">
      <div class="map-header">
        <div>
          <div class="map-title">Apskričių pasiskirstymas</div>
          <div class="map-subtitle">Skaičius rodo atfiltruotų įrašų kiekį</div>
        </div>
      </div>
      <div class="map-content">
        <div id="lt-map" class="lt-map" role="img" aria-label="Lietuvos apskričių žemėlapis">Kraunamas žemėlapis...</div>
        <div class="map-meta">
          <div id="map-unknown" class="map-unknown"></div>
          <div class="map-hint">Spauskite apskritį filtravimui (Shift — kelių pasirinkimas).</div>
        </div>
      </div>
    </div>
  </div>

  <div class="view view-table" id="view-table">
  <div class="info-bar">
    <span><span id="count">-</span><span class="mini-spinner"></span></span>
    <span id="query-time"></span>
  </div>

  <div class="table-wrap">
    <table>
      <thead>
        <tr id="thead-row">
          <th data-col="AGR_MARKE">Markė</th>
          <th data-col="KOMERCINIS_PAV">Komercinis pav.</th>
          <th data-col="GAMINTOJO_PAV">Gamintojo pav.</th>
          <th data-col="GAMINTOJO_PAV_BAZ">Gam. pav. baz.</th>
          <th data-col="KATEGORIJA_KLASE">Kategorija</th>
          <th data-col="KEB_PAVADINIMAS">Kėbulas</th>
          <th data-col="DEGALAI">Degalai</th>
          <th data-col="GALIA">Galia (kW)</th>
          <th data-col="DARBINIS_TURIS">Tūris (cm³)</th>
          <th data-col="AGR_CAR_YEAR">Modelio metai</th>
          <th data-col="PIRM_REG_DATA">Pirma reg.</th>
          <th data-col="RIDA">Rida</th>
          <th data-col="SPALVA">Spalva</th>
          <th data-col="SAVIVALDYBE">Savivaldybė</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
  </div>

  <div class="pagination">
    <button id="btn-prev" disabled>&larr; Ankstesnis</button>
    <span id="page-info">-</span>
    <button id="btn-next" disabled>Kitas &rarr;</button>
  </div>
  </div>
</div>

<div class="modal-overlay" id="modal">
  <div class="modal">
    <div class="modal-header">
      <h2 id="modal-title">Informacija</h2>
      <button class="modal-close" id="modal-close">&times;</button>
    </div>
    <div class="modal-body">
      <table class="detail-table"><tbody id="modal-body"></tbody></table>
    </div>
  </div>
</div>

<footer class="app-footer">Donatas Puidokas © 2026 — pagaminta su Claude - naudojam atvirus duomenis <a href="https://data.gov.lt/" target="_blank" rel="noopener noreferrer">data.gov.lt</a></footer>

<script type="module" src="app.js"></script>

</body>
</html>
